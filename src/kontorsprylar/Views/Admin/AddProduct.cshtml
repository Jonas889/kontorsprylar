@using kontorsprylar.ViewModels
@model AddProductViewModel
@{
    ViewBag.Title = "Lägg till produkt";
    Layout = "_AdminLayout";
}

<script>
    $(document).ready(function () {
        $('#txtUploadFile').on('change', function (e) {
            var files = e.target.files;
            //var myID = 3; //uncomment this to make sure the ajax URL works
            if (files.length > 0) {
                console.log(files);
                if (window.FormData !== undefined) {
                    var data = new FormData();
                    for (var x = 0; x < files.length; x++) {
                        data.append("file" + x, files[x]);
                    }

                    //$.ajax({
                    //    type: "POST",
                    //    url: '/MyController/UploadFile?id=' + myID,
                    //    contentType: false,
                    //    processData: false,
                    //    data: data,
                    //    success: function (result) {
                    //        console.log(result);
                    //    },
                    //    error: function (xhr, status, p3, p4) {
                    //        var err = "Error " + " " + status + " " + p3 + " " + p4;
                    //        if (xhr.responseText && xhr.responseText[0] == "{")
                    //            err = JSON.parse(xhr.responseText).Message;
                    //        console.log(err);
                    //    }
                    //});
                } 
            }
        });
    });

</script>

<form asp-controller="admin" asp-action="addproduct">
    <div class="container-fluid" style="height:1000px">
        <div class="col-sm-4">

            @*<div asp-validation-summary="ValidationSummary.All"></div>*@

            <label asp-for="ProductName"></label>
            <input asp-for="ProductName" class="form-control" />
            @*<span asp-validation-for="ProductName"></span>*@
            <br />

            <label asp-for="Price"></label>
            <input asp-for="Price" class="form-control" />
            @*<span asp-validation-for="Price"></span>*@
            <br />

            <label asp-for="CampaignPrice"></label>
            <input asp-for="CampaignPrice" class="form-control" />
            @*<span asp-validation-for="CampaignPrice"></span>*@
            <br />

            <label asp-for="StockQuantity"></label>
            <input asp-for="StockQuantity" class="form-control" />
            @*<span asp-validation-for="StockQuantity"></span>*@
            <br />

            <label asp-for="ImgLink"></label>
            <input asp-for="ImgLink" class="form-control" />
            @*<span asp-validation-for="ImgLink"></span>*@
            <br />

            <label asp-for="Description"></label>
            <textarea rows="5" asp-for="Description" class="form-control"></textarea>
            @*<span asp-validation-for="Description"></span>*@
        </div>
        <div class="col-sm-4">
            <div class="checkbox">
                <label asp-for="ForSale"><input type="checkbox" asp-for="ForSale" />Tillgänglig på sidan</label>
            </div>
            <input id="submitProduct" type="submit" class="btn btn-primary" value="Lägg till produkt" />
        </div>
        <div class="col-sm-4">
            <div>
                <input type="file" name="UploadFile" id="txtUploadFile"  />
            </div>

        </div>
    </div>

</form>